<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>SKRC wav â†’ ogg å¤‰æ›ãƒ„ãƒ¼ãƒ«</title>

<style>
body {
  background:#111;
  color:#eee;
  font-family:sans-serif;
  padding:30px;
}
h2 { margin-bottom:10px; }
input, button {
  margin-top:10px;
  font-size:16px;
}
button {
  padding:8px 20px;
}
#log {
  margin-top:20px;
  white-space:pre-line;
  font-size:14px;
}
</style>
</head>

<body>
<h2>SKRC wav â†’ ogg ä¸€æ‹¬å¤‰æ›ãƒ„ãƒ¼ãƒ«</h2>

<p>â‘  wavãŒå…¥ã£ãŸzipãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠï¼š</p>
<input type="file" id="zip" accept=".zip">

<br>
<button onclick="start()">â‘¡ å¤‰æ›é–‹å§‹</button>

<div id="log"></div>

<script>
function log(t){
  document.getElementById("log").textContent += t + "\n";
}

async function start(){
  document.getElementById("log").textContent = "";

  const file = document.getElementById("zip").files[0];
  if(!file){
    log("âŒ zipãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„");
    return;
  }

  log("ğŸš„ ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡ä¸­â€¦");

  const form = new FormData();
  form.append("zip", file);

  const res = await fetch("/convert", {
    method: "POST",
    body: form
  });

  if(!res.ok){
    log("âŒ å¤‰æ›ã«å¤±æ•—ã—ã¾ã—ãŸ");
    return;
  }

  log("ğŸ“¦ zipç”Ÿæˆå®Œäº†ï¼ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰é–‹å§‹â€¦");

  const blob = await res.blob();
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "SKRC_ogg_converted.zip";
  a.click();

  log("âœ… å®Œäº†ï¼ï¼");
}
</script>
</body>
</html>
